{{define "content"}}
<!-- Modal de Verificación de Contraseña -->
<div id="passwordModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white dark:bg-[#2a1a1e] rounded-xl shadow-xl max-w-md w-full mx-4">
        <div class="p-6 border-b border-[#edeef2] dark:border-[#3a252a]">
            <h3 class="text-lg font-semibold text-text-main dark:text-white">Verificación de Seguridad</h3>
            <p class="text-sm text-text-secondary dark:text-gray-400 mt-1">Ingresa tu contraseña para acceder a esta sección.</p>
        </div>
        <form id="passwordForm" onsubmit="verificarContraseña(event)" class="p-6 space-y-4">
            <div>
                <label class="block text-sm font-medium text-text-main dark:text-gray-300 mb-2">Contraseña</label>
                <input type="password" id="passwordInput" name="password" class="w-full px-4 py-2 border border-[#e0e0e0] dark:border-[#3a252a] rounded-lg bg-white dark:bg-[#1a0a0e] text-text-main dark:text-white placeholder-text-secondary dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary" placeholder="Ingresa tu contraseña" required>
                <p id="passwordError" class="text-red-500 text-sm mt-2 hidden"></p>
            </div>
            <div class="flex gap-3 justify-end">
                <button type="button" onclick="salirDeAdmin()" class="px-4 py-2 border border-[#e0e0e0] dark:border-[#3a252a] text-text-main dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-white/5 transition-colors font-medium">Cancelar</button>
                <button type="submit" class="px-4 py-2 bg-primary hover:bg-primary-hover text-white rounded-lg transition-colors font-medium">Verificar</button>
            </div>
        </form>
    </div>
</div>

<!-- Page Heading & Actions -->
<div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
    <div>
        <h2 class="text-3xl font-bold text-text-main dark:text-white tracking-tight">Gestión de Administradores</h2>
        <p class="mt-1 text-sm text-text-secondary dark:text-gray-400">Administra los usuarios con acceso al sistema.</p>
    </div>
    <button onclick="abrirModalAdministrador()" class="inline-flex items-center justify-center gap-2 bg-primary hover:bg-primary-hover text-white text-sm font-semibold h-10 px-5 rounded-lg transition-colors shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2">
        <span class="material-symbols-outlined text-[20px]">add</span>
        Nuevo Administrador
    </button>
</div>

<!-- Administradores Table -->
<div class="bg-white dark:bg-[#2a1a1e] rounded-xl overflow-hidden shadow-sm border border-[#edeef2] dark:border-[#3a252a]">
    <div class="overflow-x-auto">
        <table class="w-full">
            <thead class="bg-gray-50 dark:bg-white/5 border-b border-[#edeef2] dark:border-[#3a252a]">
                <tr>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-text-main dark:text-gray-300">Usuario</th>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-text-main dark:text-gray-300">Nombre Completo</th>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-text-main dark:text-gray-300">Rol</th>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-text-main dark:text-gray-300">Creado</th>
                    <th class="px-6 py-4 text-center text-sm font-semibold text-text-main dark:text-gray-300">Acciones</th>
                </tr>
            </thead>
            <tbody id="administradoresTable" class="divide-y divide-[#edeef2] dark:divide-[#3a252a]">
                <tr class="text-center py-8">
                    <td colspan="5" class="text-gray-500 dark:text-gray-400">Cargando administradores...</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Modal para crear/editar administrador -->
<div id="administradorModal" class="hidden fixed inset-0 z-50 overflow-y-auto" aria-labelledby="admin-modal-title" role="dialog" aria-modal="true">
    <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <!-- Background overlay -->
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true" onclick="cerrarModalAdministrador()"></div>

        <!-- Modal panel -->
        <div class="inline-block align-bottom bg-white dark:bg-[#2a1a1e] rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full">
            <!-- Modal Header -->
            <div class="bg-gray-50 dark:bg-white/5 px-4 py-3 sm:px-6 border-b border-gray-200 dark:border-[#3a252a] flex justify-between items-center">
                <h3 id="admin-modal-title" class="text-lg leading-6 font-bold text-text-main dark:text-white">
                    Nuevo Administrador
                </h3>
                <button onclick="cerrarModalAdministrador()" type="button" class="text-gray-400 hover:text-gray-500 dark:hover:text-gray-300">
                    <span class="material-symbols-outlined text-2xl">close</span>
                </button>
            </div>

            <!-- Modal Body -->
            <form id="administradorForm">
                <div class="px-4 py-5 sm:p-6">
                    <div class="grid grid-cols-1 gap-x-6 gap-y-6 sm:grid-cols-6">
                        
                        <!-- Usuario -->
                        <div class="sm:col-span-3">
                            <label for="usuario" class="block text-sm font-medium text-text-main dark:text-gray-200">Usuario *</label>
                            <input type="text" id="usuario" required 
                                   class="mt-1 block w-full rounded-md border-gray-300 dark:border-[#3a252a] dark:bg-background-dark dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm">
                        </div>

                        <!-- Nombre -->
                        <div class="sm:col-span-3">
                            <label for="nombre" class="block text-sm font-medium text-text-main dark:text-gray-200">Nombre *</label>
                            <input type="text" id="nombre" required 
                                   class="mt-1 block w-full rounded-md border-gray-300 dark:border-[#3a252a] dark:bg-background-dark dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm">
                        </div>

                        <!-- Apellido Paterno -->
                        <div class="sm:col-span-3">
                            <label for="apellido_paterno" class="block text-sm font-medium text-text-main dark:text-gray-200">Apellido Paterno *</label>
                            <input type="text" id="apellido_paterno" required 
                                   class="mt-1 block w-full rounded-md border-gray-300 dark:border-[#3a252a] dark:bg-background-dark dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm">
                        </div>

                        <!-- Apellido Materno -->
                        <div class="sm:col-span-3">
                            <label for="apellido_materno" class="block text-sm font-medium text-text-main dark:text-gray-200">Apellido Materno</label>
                            <input type="text" id="apellido_materno" 
                                   class="mt-1 block w-full rounded-md border-gray-300 dark:border-[#3a252a] dark:bg-background-dark dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm">
                        </div>

                        <!-- Contraseña -->
                        <div class="sm:col-span-3">
                            <label for="password" class="block text-sm font-medium text-text-main dark:text-gray-200">Contraseña <span id="passwordRequired" class="text-red-600">*</span></label>
                            <input type="password" id="password" 
                                   class="mt-1 block w-full rounded-md border-gray-300 dark:border-[#3a252a] dark:bg-background-dark dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm">
                            <p class="mt-1 text-xs text-text-secondary dark:text-gray-400" id="passwordHint">Dejar vacío para mantener la contraseña actual</p>
                        </div>

                        <!-- Rol -->
                        <div class="sm:col-span-3">
                            <label for="rol" class="block text-sm font-medium text-text-main dark:text-gray-200">Rol *</label>
                            <select id="rol" required 
                                    class="mt-1 block w-full rounded-md border-gray-300 dark:border-[#3a252a] dark:bg-background-dark dark:text-white shadow-sm focus:border-primary focus:ring-primary sm:text-sm">
                                <option value="">Seleccione un rol</option>
                                <option value="Administrador">Administrador</option>
                                <option value="Operador">Operador</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Modal Footer -->
                <div class="bg-gray-50 dark:bg-white/5 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse border-t border-gray-200 dark:border-[#3a252a]">
                    <button type="submit" 
                            class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm">
                        Guardar
                    </button>
                    <button type="button" onclick="cerrarModalAdministrador()" 
                            class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-[#3a252a] shadow-sm px-4 py-2 bg-white dark:bg-background-dark text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

{{end}}

{{define "scripts"}}
<script src="/static/js/administradores.js"></script>
{{end}}
