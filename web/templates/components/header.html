{{define "header"}}
<header class="sticky top-0 z-40 w-full backdrop-blur flex-none transition-colors duration-500 lg:z-50 bg-white/80 dark:bg-[#1a0a0e]/80 border-b border-gray-200 dark:border-[#3a252a]">
    <div class="max-w-8xl mx-auto">
        <div class="py-4 px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <div class="flex items-center gap-3">
                    <div class="flex items-center justify-center w-16 h-10 rounded-lg bg-primary">
                        <img src="/static/img/logos/UES-WHITE.png" alt="UES Logo" class="w-14 h-11 object-contain">
                    </div>
                    <div class="flex flex-col">
                        <h1 class="text-lg font-bold text-text-main dark:text-white">Sistema UES</h1>
                        <p class="text-xs text-text-secondary dark:text-gray-400">Gestión de Egresados</p>
                    </div>
                </div>

                <!-- Navigation -->
                <nav class="hidden md:flex items-center space-x-1">
                    <a href="/dashboard" class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg text-text-main dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors">
                        <span class="material-symbols-outlined text-[20px]">dashboard</span>
                        Dashboard
                    </a>
                    <a href="/egresados" class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg text-text-main dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors">
                        <span class="material-symbols-outlined text-[20px]">groups</span>
                        Egresados
                    </a>
                    <a href="/administradores" class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg text-text-main dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors">
                        <span class="material-symbols-outlined text-[20px]">admin_panel_settings</span>
                        Administradores
                    </a>
                </nav>

                <!-- Right side: Theme Toggle + User Menu -->
                <div class="flex items-center gap-3">
                    <!-- Theme Toggle Button -->
                    <button id="themeToggle" class="flex items-center justify-center w-10 h-10 rounded-lg text-text-main dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors" title="Cambiar tema">
                        <span class="material-symbols-outlined text-2xl" id="themeIcon">light_mode</span>
                    </button>

                    <!-- User Dropdown Menu -->
                    <div class="hidden sm:flex items-center gap-3 pl-3 border-l border-gray-200 dark:border-[#3a252a] relative">
                        <button onclick="toggleUserMenu()" class="flex items-center gap-2 hover:opacity-80 transition-opacity">
                            <span class="material-symbols-outlined text-[24px] text-text-main dark:text-gray-300">account_circle</span>
                            <span class="text-sm font-medium text-text-main dark:text-white">{{.NombreCompleto}}</span>
                            <span class="material-symbols-outlined text-[18px] text-text-main dark:text-gray-300">expand_more</span>
                        </button>
                        
                        <!-- Dropdown Menu -->
                        <div id="userDropdown" class="hidden absolute right-0 top-full mt-2 w-48 bg-white dark:bg-[#2a1a1e] rounded-lg shadow-lg border border-gray-200 dark:border-[#3a252a] py-2 z-50">
                            <a href="/administradores" class="flex items-center gap-3 px-4 py-2 text-sm text-text-main dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors">
                                <span class="material-symbols-outlined text-[20px]">admin_panel_settings</span>
                                <span>Administradores</span>
                            </a>
                            <div class="border-t border-gray-200 dark:border-[#3a252a]"></div>
                            <a href="/logout" class="flex items-center gap-3 px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors">
                                <span class="material-symbols-outlined text-[20px]">logout</span>
                                <span>Salir</span>
                            </a>
                        </div>
                    </div>

                    <!-- Mobile Menu Button -->
                    <button id="mobileMenuBtn" class="md:hidden flex items-center justify-center w-10 h-10 rounded-lg text-text-main dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors">
                        <span class="material-symbols-outlined text-2xl">menu</span>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu -->
            <div id="mobileMenu" class="hidden md:hidden mt-4 pt-4 border-t border-gray-200 dark:border-[#3a252a]">
                <nav class="flex flex-col space-y-1">
                    <a href="/dashboard" class="flex items-center gap-2 px-4 py-3 text-sm font-medium rounded-lg text-text-main dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors">
                        <span class="material-symbols-outlined text-[20px]">dashboard</span>
                        Dashboard
                    </a>
                    <a href="/egresados" class="flex items-center gap-2 px-4 py-3 text-sm font-medium rounded-lg text-text-main dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors">
                        <span class="material-symbols-outlined text-[20px]">groups</span>
                        Egresados
                    </a>
                    <a href="/administradores" class="flex items-center gap-2 px-4 py-3 text-sm font-medium rounded-lg text-text-main dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors">
                        <span class="material-symbols-outlined text-[20px]">admin_panel_settings</span>
                        Administradores
                    </a>
                    <a href="/logout" class="flex items-center gap-2 px-4 py-3 text-sm font-medium rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors">
                        <span class="material-symbols-outlined text-[20px]">logout</span>
                        Cerrar Sesión
                    </a>
                </nav>
            </div>
        </div>
    </div>
</header>

<script>
// Mobile Menu Toggle
document.getElementById('mobileMenuBtn')?.addEventListener('click', function() {
    const menu = document.getElementById('mobileMenu');
    menu.classList.toggle('hidden');
});

// User Dropdown Toggle
function toggleUserMenu() {
    const dropdown = document.getElementById('userDropdown');
    dropdown.classList.toggle('hidden');
}

// Cerrar dropdown al hacer click fuera
document.addEventListener('click', function(event) {
    const userDropdown = document.getElementById('userDropdown');
    const userButton = event.target.closest('button[onclick="toggleUserMenu()"]');
    
    if (!userButton && !event.target.closest('#userDropdown')) {
        userDropdown?.classList.add('hidden');
    }
});
</script>
{{end}}